<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Grappling — Catálogo</title>
    <meta name="color-scheme" content="dark light">
    <meta name="description" content="Catálogo responsivo de camisas e equipamentos Grappling">
    <!-- Open Graph / Twitter for social sharing -->
    <link rel="canonical" href="https://grappling-9wak.vercel.app/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Grappling — Catálogo">
    <meta property="og:title" content="Grappling — Catálogo">
    <meta property="og:description" content="Catálogo responsivo de camisas e equipamentos Grappling">
    <meta property="og:url" content="https://grappling-9wak.vercel.app/">
    <!-- Importante: use uma imagem PNG/JPG quadrada. Substitua pelo arquivo real quando disponível. -->
    <meta property="og:image" content="https://grappling-9wak.vercel.app/logo-512.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:image:type" content="image/png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Grappling — Catálogo">
    <meta name="twitter:description" content="Catálogo responsivo de camisas e equipamentos Grappling">
    <meta name="twitter:image" content="https://grappling-9wak.vercel.app/logo-512.png">
    <link rel="icon" type="image/svg+xml" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="%234f8cff"/><stop offset="1" stop-color="%2320c997"/></linearGradient></defs><rect width="64" height="64" rx="14" fill="url(%23g)"/><text x="50%" y="54%" font-family="Arial Black, Arial" font-weight="900" font-size="34" text-anchor="middle" fill="white">G</text></svg>' />
    <link rel="preconnect" href="https://wa.me" crossorigin>
    <style>
        :root {
            --bg: #0f1115;
            --bg-elev: #161a22;
            --text: #e6e8ee;
            --muted: #a6adbb;
            --primary: #4f8cff;
            --primary-600: #3f78e6;
            --accent: #20c997;
            --card: #131722;
            --border: #262b36;
            --shadow: 0 10px 30px rgba(0, 0, 0, .35);
            --radius: 8px;
            --transition: 220ms ease;
        }
        :root.light {
            --bg: #f6f7fb;
            --bg-elev: #ffffff;
            --text: #101318;
            --muted: #566073;
            --primary: #2a66ff;
            --primary-600: #204fde;
            --accent: #0fb884;
            --card: #ffffff;
            --border: #e8ebf2;
            --shadow: 0 10px 30px rgba(16, 19, 24, .08);
        }

        html, body {
            height: 100%;
        }
        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
            color: var(--text);
            background: radial-gradient(1200px 800px at 10% -10%, rgba(79,140,255,.12), transparent 45%),
                        radial-gradient(1000px 700px at 120% 20%, rgba(32,201,151,.12), transparent 40%),
                        var(--bg);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header */
        header {
            position: sticky;
            top: 0;
            z-index: 20;
            background: color-mix(in oklab, var(--bg-elev) 92%, transparent);
            backdrop-filter: saturate(1.4) blur(8px);
            border-bottom: 1px solid var(--border);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px 20px;
        }
        .header-bar {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 12px;
        }
        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 0;
        }
        .logo {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            box-shadow: var(--shadow);
            display: grid;
            place-items: center;
            color: white;
            font-weight: 800;
        }
        .title {
            font-size: 18px;
            font-weight: 700;
            white-space: nowrap;
        }
        .brand-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: var(--shadow);
            object-fit: contain;
            aspect-ratio: 1 / 1;
            background: #fff;
            border: 1px solid var(--border);
        }
        .brand-logo-img { display: inline-block; }
        .brand-logo-pdf { display: none; }
        .search-filters {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        .search-input, .select-filter {
            appearance: none;
            border: 1px solid var(--border);
            background: var(--bg-elev);
            color: var(--text);
            padding: 10px 12px;
            border-radius: var(--radius);
            transition: border-color var(--transition), background var(--transition), box-shadow var(--transition);
            box-shadow: 0 1px 0 rgba(0,0,0,.04) inset;
        }
        .search-input:focus, .select-filter:focus {
            outline: none;
            border-color: color-mix(in oklab, var(--primary) 70%, var(--border));
            box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 22%, transparent);
        }
        .theme-toggle {
            border: 1px solid var(--border);
            background: var(--bg-elev);
            color: var(--text);
            padding: 10px 12px;
            border-radius: var(--radius);
            cursor: pointer;
            transition: transform var(--transition), background var(--transition), border-color var(--transition);
        }
        .theme-toggle:hover { transform: translateY(-1px); }
        .theme-toggle:active { transform: translateY(0); }

        /* Grid */
        .grid {
            display: grid;
            gap: 16px;
            padding: 20px;
            max-width: 1200px;
            margin: 12px auto 80px;
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }
        @media (min-width: 600px) { .grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 900px) { .grid { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 1200px) { .grid { grid-template-columns: repeat(4, 1fr); } }

        /* Responsividade: mobile-first ajustes */
        @media (max-width: 599px) {
            .container { padding: 12px 14px; }
            .header-bar { gap: 10px; }
            .brand-logo { width: 52px; height: 52px; }
            .brand-logo-img { display: none; }
            .brand-logo-pdf { display: inline-block; }
            .title { white-space: normal; font-size: 17px; }
            .search-filters { flex-wrap: wrap; gap: 8px; }
            .search-input, .select-filter { width: 100%; }
            .grid { padding: 12px; gap: 12px; margin: 8px auto 70px; }
            .card img { height: min(56vw, 260px); }
            .content { padding: 14px 14px 16px; }
            .media { min-height: 220px; }
        }

        /* Tablet ajustes */
        @media (min-width: 600px) and (max-width: 899px) {
            .container { padding: 14px 18px; }
            .card img { height: 240px; }
        }

        /* Card */
        .card {
            position: relative;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
            cursor: pointer;
        }
        .card:focus-visible { outline: 3px solid color-mix(in oklab, var(--primary) 45%, transparent); outline-offset: -3px; }
        .card:hover { transform: translateY(-3px); box-shadow: 0 12px 34px rgba(0,0,0,.28); border-color: color-mix(in oklab, var(--primary) 20%, var(--border)); }
        .thumb { position: relative; }
        .card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            display: block;
            background: #0002;
        }
        .card-body {
            padding: 12px 12px 16px;
            display: grid;
            gap: 6px;
        }
        .name { font-weight: 700; letter-spacing: .2px; }
        .price { color: var(--accent); font-weight: 800; }
        .desc { color: var(--muted); font-size: 14px; line-height: 1.3; }
        .wa-fab { /* posicionado sobre a imagem */
            position: absolute;
            right: 10px;
            bottom: 10px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            background: #25D366;
            color: #022;
            box-shadow: var(--shadow);
            border: none;
            cursor: pointer;
            transition: transform var(--transition), filter var(--transition);
        }
        .wa-fab:hover { transform: scale(1.05); filter: brightness(1.05); }
        .wa-fab:active { transform: scale(1.0); }

        /* WhatsApp flutuante */
        .wa-float {
            position: fixed; right: 18px; bottom: 18px; z-index: 60;
            width: 56px; height: 56px; border-radius: 50%;
            display: grid; place-items: center;
            background: #25D366; border: 1px solid color-mix(in oklab, #25D366 20%, #000);
            box-shadow: 0 14px 34px rgba(0,0,0,.28);
            cursor: pointer;
            transition: transform var(--transition), filter var(--transition);
        }
        .wa-float:hover { transform: translateY(-2px); filter: brightness(1.05); }
        .wa-float img { width: 28px; height: 28px; border-radius: 50%; object-fit: cover; }

        /* Modal */
        .backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,.52);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            z-index: 50;
        }
        .backdrop.open { display: flex; animation: fadeIn var(--transition); }
        @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
        .modal {
            width: min(100%, 980px);
            background: var(--bg-elev);
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) + 4px);
            box-shadow: var(--shadow);
            overflow: hidden;
            transform-origin: center;
            animation: scaleIn 220ms cubic-bezier(.2,.8,.2,1);
        }
        @keyframes scaleIn { from { transform: scale(.96); opacity: 0 } to { transform: scale(1); opacity: 1 } }
        .modal-grid { display: grid; grid-template-columns: 1fr; }
        @media (min-width: 900px) { .modal-grid { grid-template-columns: 1.1fr .9fr; } }

        .media {
            position: relative;
            background: #0b0e14;
            min-height: 320px;
            display: grid;
            place-items: center;
            overflow: hidden;
        }
        .media img {
            max-width: 100%;
            max-height: 80vh;
            object-fit: contain;
            transition: transform 180ms ease;
            touch-action: none; /* para pinch/arrastar */
        }
        .zoom-controls {
            position: absolute;
            right: 12px; bottom: 12px;
            display: flex; gap: 8px;
        }
        .close-x {
            position: absolute; top: 10px; right: 10px;
            width: 40px; height: 40px; border-radius: 50%;
            border: 1px solid var(--border); background: color-mix(in oklab, var(--bg-elev) 90%, transparent);
            display: grid; place-items: center; cursor: pointer;
            transition: transform var(--transition), background var(--transition);
        }
        .close-x:hover { transform: scale(1.05); }
        .btn, .btn-inline {
            border: 1px solid var(--border);
            background: var(--primary);
            color: white;
            border-radius: 10px;
            padding: 8px 12px;
            font-weight: 600;
            font-size: 14px;
            letter-spacing: .1px;
            cursor: pointer;
            transition: transform var(--transition), filter var(--transition), background var(--transition), box-shadow var(--transition);
            box-shadow: 0 4px 14px color-mix(in oklab, var(--primary) 22%, transparent);
        }
        .btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
        .btn:active { transform: translateY(0); }
        .btn.secondary { background: var(--bg-elev); color: var(--text); }
        .btn.ghost { background: transparent; color: var(--text); border-color: color-mix(in oklab, var(--text) 18%, var(--border)); box-shadow: none; }
        .btn.icon { width: 36px; height: 36px; padding: 0; display: grid; place-items: center; }
        .btn.whatsapp { background: #25D366; color: #0d2918; box-shadow: 0 8px 22px rgba(37,211,102,.28); }
        .btn.whatsapp:hover { filter: brightness(1.03); }
        .btn.instagram {
            background: radial-gradient(circle at 30% 30%, #feda77 0, #f58529 20%, #dd2a7b 55%, #8134af 80%, #515bd4 100%);
            color: #fff;
            border-color: transparent;
        }
        .btn.instagram:hover { filter: brightness(1.02); }
        .wa-ico { width: 16px; height: 16px; vertical-align: -3px; margin-right: 6px; border-radius: 3px; }
        .ico { width: 16px; height: 16px; vertical-align: -3px; margin-right: 6px; }
        .pay img { height: 26px; object-fit: contain; display: block; }
        .pay-badge { display: grid; place-items: center; }
        .content { padding: 16px 16px 18px; display: grid; gap: 12px; }
        .content h2 { margin: 0; font-size: 22px; }
        .content .long { color: var(--muted); line-height: 1.45; }
        .row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
        .sizes { display: flex; gap: 8px; }
        .chip {
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
            border-radius: 999px;
            padding: 8px 12px;
            cursor: pointer;
            transition: background var(--transition), border-color var(--transition), transform var(--transition);
        }
        .chip[aria-pressed="true"] { background: color-mix(in oklab, var(--primary) 22%, var(--bg)); border-color: color-mix(in oklab, var(--primary) 60%, var(--border)); }
        .actions { display: grid; grid-template-columns: 1fr; gap: 12px; }
        @media (min-width: 560px) { .actions { grid-template-columns: 1fr 1fr; } }
        .btn.wide { width: 100%; }

        .nav-arrow {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 42px; height: 42px; border-radius: 50%;
            border: 1px solid var(--border); background: color-mix(in oklab, var(--bg-elev) 80%, transparent);
            display: grid; place-items: center; cursor: pointer; transition: background var(--transition), transform var(--transition);
        }
        .nav-arrow:hover { transform: translateY(-50%) scale(1.05); }
        .nav-left { left: 10px; }
        .nav-right { right: 10px; }

        /* Footer */
        footer { border-top: 1px solid var(--border); background: color-mix(in oklab, var(--bg-elev) 92%, transparent); }
        .footer-inner { max-width: 1200px; margin: 0 auto; padding: 28px 20px; }
        .footer-cols { display: grid; grid-template-columns: 1fr; gap: 20px; align-items: start; }
        @media (min-width: 800px) { .footer-cols { grid-template-columns: 1fr 1fr; } }
        .footer-title { font-weight: 800; letter-spacing: .2px; margin-bottom: 10px; }
        .muted { color: var(--muted); }
        .social { display: flex; gap: 14px; align-items: center; flex-wrap: wrap; }
        .social a { display: inline-flex; align-items: center; gap: 8px; text-decoration: none; }
        .soc-badge { width: 44px; height: 44px; border-radius: 50%; display: grid; place-items: center; border: 1px solid var(--border); background: var(--bg-elev); box-shadow: var(--shadow); transition: transform var(--transition), box-shadow var(--transition); }
        .soc-badge:hover { transform: translateY(-2px); box-shadow: 0 12px 30px rgba(0,0,0,.2); }
        .soc-badge img, .soc-badge svg { width: 24px; height: 24px; object-fit: cover; border-radius: 4px; }
        .soc-ig { font-weight: 800; color: var(--text); background: radial-gradient(circle at 30% 30%, #feda77 0, #f58529 15%, #dd2a7b 55%, #8134af 80%, #515bd4 100%); border: none; }
        .pay { display: flex; gap: 12px; flex-wrap: wrap; }
        .pay-badge { min-width: 72px; height: 42px; padding: 6px 12px; border: 1px solid var(--border); border-radius: 10px; background: var(--bg-elev); display: grid; place-items: center; box-shadow: 0 6px 16px rgba(0,0,0,.08); transition: transform var(--transition), box-shadow var(--transition); }
        .pay-badge:hover { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(0,0,0,.12); }
    </style>
</head>
<body>
    <header>
        <div class="container header-bar">
            <div class="brand" aria-label="Logo da loja Grappling">
                <object class="brand-logo brand-logo-pdf" data="Logo Grappling.pdf.pdf#toolbar=0&navpanes=0&scrollbar=0" type="application/pdf" aria-label="Logo Grappling"></object>
                <img class="brand-logo brand-logo-img" src="logo-512.png" alt="Logo Grappling" loading="eager" referrerpolicy="no-referrer"/>
                <div class="title">Grappling — Catálogo</div>
            </div>
            <div class="search-filters" role="search">
                <input id="search" class="search-input" type="search" placeholder="Buscar produto..." aria-label="Buscar por nome">
                <select id="category" class="select-filter" aria-label="Filtrar por categoria">
                    <option value="">Todas categorias</option>
                    <option value="camisas">Camisas</option>
                    <option value="equipamentos">Equipamentos</option>
                </select>
                
            </div>
            <button id="themeToggle" class="theme-toggle" aria-label="Alternar modo claro/escuro">Tema</button>
        </div>
    </header>

    <main class="grid" id="grid" aria-live="polite"></main>

    <div id="backdrop" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
        <div class="modal" data-focus-trap>
            <div class="modal-grid">
                <div class="media" id="media">
                    <button class="nav-arrow nav-left" aria-label="Anterior" data-dir="-1">◀</button>
                    <img id="modalImg" alt="Imagem ampliada do produto" loading="eager">
                    <button class="nav-arrow nav-right" aria-label="Próximo" data-dir="1">▶</button>
                    <div class="zoom-controls">
                        <button class="btn icon" id="zoomOut" aria-label="Reduzir zoom">−</button>
                        <button class="btn icon" id="zoomIn" aria-label="Ampliar zoom">+</button>
                        <button class="btn icon" id="zoomReset" aria-label="Resetar zoom">⤾</button>
                    </div>
                </div>
                <div class="content">
                    <button id="closeX" class="close-x" aria-label="Fechar">✕</button>
                    <h2 id="modalTitle"></h2>
                    <div class="row"><span class="price" id="modalPrice"></span></div>
                    <p class="long" id="modalDesc"></p>
                    
                    <div class="actions">
                        <button class="btn whatsapp wide" id="shareWa"><img class="wa-ico" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcLMtatwwSSJTM6ZW0Tqa7ehKEqAIkHhL54Q&s" alt="WhatsApp">Compartilhar</button>
                        <button class="btn wide" id="buyWa">Comprar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-inner">
            <div class="footer-cols">
                <div>
                    <div class="footer-title">Contato</div>
                    <div class="social">
                        <a class="btn whatsapp" href="https://wa.me/558188026840" target="_blank" rel="noopener"><img class="wa-ico" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcLMtatwwSSJTM6ZW0Tqa7ehKEqAIkHhL54Q&s" alt="WhatsApp">Falar no WhatsApp</a>
                        <a class="btn instagram" href="https://instagram.com/grapplingfigthstore" target="_blank" rel="noopener"><svg class="ico" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.75A5.25 5.25 0 1 1 6.75 13 5.26 5.26 0 0 1 12 7.75zm0 2A3.25 3.25 0 1 0 15.25 13 3.25 3.25 0 0 0 12 9.75zM18 6.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/></svg>Instagram</a>
                        <div class="muted">RT Jiu-jítsu/Wrestling · R. 12 de Outubro, 66 - Quinze de Novembro, Gravatá - PE, 55642-221 · Tel: 55 81 8802-6840 (Enrique Torres)</div>
                    </div>
                </div>
                <div>
                    <div class="footer-title">Formas de pagamento</div>
                    <div class="pay">
                        <div class="pay-badge"><img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa"></div>
                        <div class="pay-badge"><img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" alt="Mastercard"></div>
                        <div class="pay-badge" title="Dinheiro">
                            <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='26' height='26' aria-hidden='true'>
                                <rect x='2' y='6' width='20' height='12' rx='2' fill='#16a34a'/>
                                <rect x='4' y='8' width='16' height='8' rx='2' fill='#22c55e'/>
                                <circle cx='12' cy='12' r='3' fill='white'/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Botão flutuante do WhatsApp -->
    <a id="waFloat" class="wa-float" href="#" aria-label="WhatsApp flutuante">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcLMtatwwSSJTM6ZW0Tqa7ehKEqAIkHhL54Q&s" alt="WhatsApp">
    </a>

    <script>
        // =============================
        // CONFIGURAÇÃO
        // =============================
        // Número do WhatsApp (somente dígitos): +55 81 90000-0000
        const WHATSAPP_NUMBER = '558188026840';

        // Produtos de exemplo — substitua conforme necessário.
        // As imagens abaixo usam fotos locais do diretório do projeto.
        const products = [
            { id: 'p1',  name: 'Regata Skin Masculina Soft', price: 117.00,  short: 'Camisa de jiu-jítsu premium.', long: 'Tecido respirável, toque macio e caimento moderno para treinos e dia a dia.', category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.20.jpeg' },
            { id: 'p2',  name: 'Regata Masculina Double', price: 89.00,  short: 'Conforto e performance.',      long: 'Modelagem confortável e costuras reforçadas para treinos intensos.',         category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.20 (1).jpeg' },
            { id: 'p3',  name: 'Camiseta Pencil', price: 106.00,  short: 'Secagem rápida.',               long: 'Malha de secagem rápida que mantém o corpo seco durante o treino.',      category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.20 (2).jpeg' },
            { id: 'p4',  name: 'Camiseta Soft', price: 106.00,  short: 'Leve e resistente.',           long: 'Estampa resistente e tecido leve com elasticidade na medida.',          category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.21.jpeg' },
            { id: 'p5',  name: 'Camiseta Porus', price: 116.00,  short: 'Logo Grappling.',              long: 'Camiseta com logo da marca para treinos e lifestyle.',                 category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.21 (1).jpeg' },
            { id: 'p6',  name: 'Camiseta Porus', price: 116.00, short: 'Performance e mobilidade.',    long: 'Conforto em rolas longas com mobilidade total e ótima respirabilidade.',category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.21 (2).jpeg' },
            { id: 'p7',  name: 'Camiseta Skin Porus JJ4', price: 132.00,  short: 'Dry fit antiodor.',            long: 'Tecnologia antiodor para treinos frequentes mantendo o frescor.',     category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.21 (3).jpeg' },
            { id: 'p8',  name: 'Camiseta Journal', price: 106.00,  short: 'Tecido macio.',                long: 'Conforto prolongado com malha penteada e excelente caimento.',        category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.21 (4).jpeg' },
            { id: 'p9',  name: 'Camiseta Red Jiu', price: 106.00,  short: 'Treino diário.',               long: 'Durável para uso diário no tatame e fora dele.',                      category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.21 (5).jpeg' },
            { id: 'p10', name: 'Camiseta Rise UP', price: 106.00,  short: 'Respirável.',                  long: 'Mantém a temperatura corporal estável em treinos intensos.',          category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.22.jpeg' },
            { id: 'p11', name: 'Camiseta Samurai', price: 106.00, short: 'Alta elasticidade.',           long: 'Elasticidade 4-way para amplitude total de movimentos.',              category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.22 (1).jpeg' },
            { id: 'p12', name: 'Camiseta Soft', price: 106.00, short: 'Edição destaque.',             long: 'Versão destaque para quem busca design e performance.',               category: 'camisas', image: 'WhatsApp Image 2025-09-15 at 22.25.22 (2).jpeg' }
        ];

        // =============================
        // UTILIDADES
        // =============================
        const currency = (n) => n.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        const $ = (s, el = document) => el.querySelector(s);
        const $$ = (s, el = document) => Array.from(el.querySelectorAll(s));

        function createWhatsAppLink(productName, imageUrl, size) {
            const base = `https://wa.me/${WHATSAPP_NUMBER}`;
            const sizeTxt = size ? ` — Tamanho: ${size}` : '';
            const msg = `Olá, quero comprar: ${productName}${sizeTxt} — ${imageUrl}`;
            const url = `${base}?text=${encodeURIComponent(msg)}`;
            return url;
        }

        function preload(src) {
            const img = new Image();
            img.src = src;
            return img;
        }

        // =============================
        // TEMA (CLARO/ESCURO)
        // =============================
        const themeToggle = $('#themeToggle');
        const root = document.documentElement;
        function applyTheme(theme) {
            root.classList.toggle('light', theme === 'light');
            localStorage.setItem('theme', theme);
        }
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) applyTheme(savedTheme);
        else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) applyTheme('light');
        themeToggle.addEventListener('click', () => {
            const next = root.classList.contains('light') ? 'dark' : 'light';
            applyTheme(next);
        });

        // =============================
        // RENDERIZAÇÃO DE CARDS
        // =============================
        const grid = $('#grid');
        function renderCards(list) {
            grid.innerHTML = '';
            list.forEach((p, idx) => {
                const card = document.createElement('article');
                card.className = 'card';
                card.tabIndex = 0;
                card.setAttribute('role', 'button');
                card.setAttribute('aria-label', `${p.name} — abrir detalhes`);

                const img = document.createElement('img');
                img.src = p.image;
                img.loading = 'lazy';
                img.alt = p.name;
                img.referrerPolicy = 'no-referrer';

                const body = document.createElement('div');
                body.className = 'card-body';
                body.innerHTML = `
                    <div class="name">${p.name}</div>
                    <div class="price">${currency(p.price)}</div>
                    <div class="desc">${p.short}</div>
                `;

                // Removido botão de WhatsApp por card — usaremos flutuante global

                // Preload imagem grande no hover/focus/touch
                const preloadHandler = () => preload(p.image);
                card.addEventListener('mouseenter', preloadHandler, { passive: true });
                card.addEventListener('focus', preloadHandler, { passive: true });
                card.addEventListener('touchstart', preloadHandler, { passive: true });

                card.addEventListener('click', () => openModal(idx, list));
                card.addEventListener('keydown', (ev) => { if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); openModal(idx, list); } });

                // Envolver imagem e whatsapp numa capa para posicionar o botão sobre a foto
                const thumb = document.createElement('div');
                thumb.className = 'thumb';
                thumb.append(img);

                card.append(thumb, body);
                grid.append(card);
            });
        }

        // =============================
        // BUSCA E FILTROS
        // =============================
        const searchInput = $('#search');
        const categorySel = $('#category');
        const sizeFilterSel = null;

        function applyFilters() {
            const q = searchInput.value.trim().toLowerCase();
            const cat = categorySel.value;
            const sizeF = null;
            const filtered = products.filter(p => {
                const byName = p.name.toLowerCase().includes(q);
                const byCat = !cat || p.category === cat;
                const bySize = true;
                return byName && byCat && bySize;
            });
            renderCards(filtered);
        }
        [searchInput, categorySel].forEach(el => el.addEventListener('input', applyFilters));

        // =============================
        // MODAL / LIGHTBOX
        // =============================
        const backdrop = $('#backdrop');
        const modalImg = $('#modalImg');
        const modalTitle = $('#modalTitle');
        const modalPrice = $('#modalPrice');
        const modalDesc = $('#modalDesc');
        const sizesEl = null;
        const navButtons = $$('.nav-arrow');
        const btnClose = $('#closeX');
        const btnShareWa = $('#shareWa');
        const btnBuyWa = $('#buyWa');

        let currentIndex = 0;
        let currentList = products;
        let selectedSize = null;
        let lastFocused = null;

        // Zoom/gestos
        let scale = 1;
        let originX = 0, originY = 0;
        let startDist = 0;
        let lastTouchMid = null;
        let isPanning = false;
        let panX = 0, panY = 0;
        let startPanX = 0, startPanY = 0;
        function applyTransform() {
            modalImg.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
        }

        function clampPan() {
            const maxPan = 300; // limite simples
            panX = Math.max(Math.min(panX, maxPan), -maxPan);
            panY = Math.max(Math.min(panY, maxPan), -maxPan);
        }

        function setZoom(newScale, center) {
            scale = Math.max(1, Math.min(newScale, 4));
            if (scale === 1) { panX = 0; panY = 0; }
            if (center) { originX = center.x; originY = center.y; }
            clampPan();
            applyTransform();
        }

        $('#zoomIn').addEventListener('click', () => setZoom(scale + 0.25));
        $('#zoomOut').addEventListener('click', () => setZoom(scale - 0.25));
        $('#zoomReset').addEventListener('click', () => setZoom(1));

        // Gestos touch: pinch e pan
        modalImg.addEventListener('touchstart', (e) => {
            if (e.touches.length === 2) {
                const [a, b] = e.touches;
                startDist = Math.hypot(a.pageX - b.pageX, a.pageY - b.pageY);
                lastTouchMid = { x: (a.pageX + b.pageX)/2, y: (a.pageY + b.pageY)/2 };
            } else if (e.touches.length === 1 && scale > 1) {
                isPanning = true;
                startPanX = e.touches[0].pageX - panX;
                startPanY = e.touches[0].pageY - panY;
            }
        }, { passive: true });

        modalImg.addEventListener('touchmove', (e) => {
            if (e.touches.length === 2 && startDist) {
                const [a, b] = e.touches;
                const dist = Math.hypot(a.pageX - b.pageX, a.pageY - b.pageY);
                const factor = dist / startDist;
                setZoom(scale * factor, lastTouchMid);
                startDist = dist;
            } else if (e.touches.length === 1 && isPanning) {
                panX = e.touches[0].pageX - startPanX;
                panY = e.touches[0].pageY - startPanY;
                clampPan();
                applyTransform();
            }
        }, { passive: true });
        modalImg.addEventListener('touchend', (e) => { if (!e.touches || e.touches.length === 0) { isPanning = false; } }, { passive: true });

        // Swipe para navegar (na área da mídia)
        const media = $('#media');
        let swipeStartX = null;
        media.addEventListener('touchstart', (e) => { if (e.touches.length === 1) swipeStartX = e.touches[0].clientX; }, { passive: true });
        media.addEventListener('touchend', (e) => {
            if (swipeStartX == null) return;
            const endX = (e.changedTouches && e.changedTouches[0].clientX) || swipeStartX;
            const dx = endX - swipeStartX;
            if (Math.abs(dx) > 50) navigate(dx > 0 ? -1 : 1);
            swipeStartX = null;
        }, { passive: true });

        // Mouse wheel para zoom (desktop)
        media.addEventListener('wheel', (e) => {
            if (!backdrop.classList.contains('open')) return;
            e.preventDefault();
            const delta = Math.sign(e.deltaY);
            setZoom(scale + (delta < 0 ? 0.15 : -0.15), { x: e.clientX, y: e.clientY });
        }, { passive: false });

        function populateSizes() { /* removido */ }

        function updateModal(idx) {
            currentIndex = (idx + currentList.length) % currentList.length;
            const p = currentList[currentIndex];
            modalTitle.textContent = p.name;
            modalPrice.textContent = currency(p.price);
            modalDesc.textContent = p.long;
            modalImg.src = p.image;
            modalImg.alt = p.name;
            setZoom(1);
            populateSizes();
        }

        function openModal(idx, list = products) {
            currentList = list;
            lastFocused = document.activeElement;
            backdrop.classList.add('open');
            updateModal(idx);
            trapFocus();
        }
        function closeModal() {
            backdrop.classList.remove('open');
            releaseFocus();
            if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
        }
        function navigate(dir) { updateModal(currentIndex + Number(dir)); }

        navButtons.forEach(b => b.addEventListener('click', () => navigate(b.dataset.dir)));
        btnClose.addEventListener('click', closeModal);
        backdrop.addEventListener('click', (e) => { if (e.target === backdrop) closeModal(); });
        document.addEventListener('keydown', (e) => {
            if (!backdrop.classList.contains('open')) return;
            if (e.key === 'Escape') closeModal();
            else if (e.key === 'ArrowLeft') navigate(-1);
            else if (e.key === 'ArrowRight') navigate(1);
        });

        btnShareWa.addEventListener('click', () => {
            const p = currentList[currentIndex];
            const link = createWhatsAppLink(p.name + ' (compartilhar)', new URL(p.image, location.href).href, selectedSize);
            window.open(link, '_blank', 'noopener');
        });
        btnBuyWa.addEventListener('click', () => {
            const p = currentList[currentIndex];
            const link = createWhatsAppLink(p.name, new URL(p.image, location.href).href, selectedSize);
            window.open(link, '_blank', 'noopener');
        });

        // WhatsApp flutuante abre conversa genérica
        const waFloat = document.getElementById('waFloat');
        if (waFloat) {
            waFloat.addEventListener('click', (e) => {
                e.preventDefault();
                const msg = 'Olá! Quero informações sobre os produtos.';
                const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
                window.open(url, '_blank', 'noopener');
            });
        }

        // Focus trap simples para o modal
        let focusable = [];
        function trapFocus() {
            const dialog = backdrop.querySelector('[data-focus-trap]');
            focusable = $$('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])', dialog)
                .filter(el => !el.hasAttribute('disabled'));
            (focusable[0] || dialog).focus();
            dialog.addEventListener('keydown', onTrapKeydown);
        }
        function releaseFocus() {
            const dialog = backdrop.querySelector('[data-focus-trap]');
            dialog.removeEventListener('keydown', onTrapKeydown);
        }
        function onTrapKeydown(e) {
            if (e.key !== 'Tab') return;
            const first = focusable[0];
            const last = focusable[focusable.length - 1];
            if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
            else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
        }

        // Navegação via swipe já implementada acima

        // =============================
        // INICIALIZAÇÃO
        // =============================
        renderCards(products);
        applyFilters();
    </script>
</body>
</html>


